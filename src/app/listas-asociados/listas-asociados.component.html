<div class = "menu">
  <div class="example-ripple-container mat-elevation-z4 menusub" 
  matRipple
  [matRippleCentered]="centered"
  [matRippleDisabled]="disabled"
  [matRippleUnbounded]="unbounded"
>







<mat-selection-list #shoes >


    <cdk-virtual-scroll-viewport appendOnly itemSize="10" class="example-viewport">

      
   

     <mat-list-item     *cdkVirtualFor="let shoe of typesOfShoes"  style="color: #000000;">
       
        <mat-divider></mat-divider>
         <div  (click)="filtrar_solicitudes(shoe.contacto,shoe.Numero_asociado,'S',shoe.identificacion)" style="float: center;  justify-content: center;  margin: 0 auto;   
        margin-right: auto; width: 60%;">
        <mat-icon class="avatar">face</mat-icon>
        </div> 
        
        <div  (click)="filtrar_solicitudes(shoe.contacto,shoe.Numero_asociado,'S',shoe.identificacion)" style="float: left;  margin: 0 auto;   
        margin-right: auto; width: 100%;">
      {{shoe.contacto}}   
        </div>

      <div   class="example-flex-container">
    <div > 



        <p>
            <span  matBadge={{shoe.Numero_Conversaciones}} matBadgeOverlap="false"><mat-icon  (click)="filtrar_solicitudes(shoe.contacto,shoe.Numero_asociado,'S',shoe.identificacion)">  chat</mat-icon></span>
          </p>


                         
           
    
          



    </div>
      </div>
    </mat-list-item> 
</cdk-virtual-scroll-viewport>
  </mat-selection-list>
  

</div>





<div  *ngIf="Solicitudes" style=" width:74%;
float:right;
vertical-align:bottom;
  text-align:bottom;
margin-right: 2px;
height: 550px;"

>
<mat-card class="conversacion" appearance="outlined">
  <mat-card-header>
    <mat-card-title>Solicitudes del contacto:  {{contacto}}</mat-card-title>
  </mat-card-header>
  <mat-card-content>
 
 
<mat-form-field appearance="standard">
  <mat-label>Filter</mat-label>
  <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
</mat-form-field> 


      

<div class="mat-elevation-z8">
  <cdk-virtual-scroll-viewport appendOnly itemSize="10" class="example-viewport1">  
  <table mat-table [dataSource]="dataSource" matSort>

    <ng-container matColumnDef="idRegistro">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
      <td mat-cell *matCellDef="let row"> {{row.idRegistro}} </td>
    </ng-container>

    <ng-container matColumnDef="Tipo_atencion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Tipo_atencion </th>
      <td style="    text-align: left;" mat-cell *matCellDef="let row"> {{row.Tipo_atencion}} </td>
    </ng-container>

    <ng-container matColumnDef="Radicado">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Radicado </th>
      <td mat-cell *matCellDef="let row"> {{row.Radicado}} </td>
    </ng-container>

     <ng-container matColumnDef="fecha_solicitud">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> fecha_solicitud </th>
      <td mat-cell *matCellDef="let row"> {{row.fecha_solicitud}} </td>
    </ng-container>

     
    <!-- <ng-container matColumnDef="Estado">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> estado </th>
      <td mat-cell *matCellDef="let row"> {{row.nombreestado}} </td>
      </ng-container>  -->
      <ng-container matColumnDef="Contactar">
        <th mat-header-cell *matHeaderCellDef> Contactar... </th>
        <td mat-cell *matCellDef="let row; let i = index;">
          <button mat-raised-button style="width: 130px;" class="btn btn-primary btn-block" focusable="false" (click)="ver_conversacion(row.contacto,row.Numero_asociado,'S')" > 
            <mat-icon style="    margin-left: -11px;">smartphone</mat-icon> Contactar...
          </button>
        </td>
      </ng-container>

    <!-- <ng-container matColumnDef="Terminar">
      <th mat-header-cell *matHeaderCellDef> Gestionar </th>
      <td mat-cell *matCellDef="let row; let i = index;">
        <button mat-raised-button  style="width: 130px;"  class="btn btn-primary btn-block" focusable="false" > 
          <mat-icon> border_color</mat-icon> Gestionar
        </button>
      </td>
    </ng-container> -->

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    <!-- Row shown when there is no matching data. -->
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="5">No data matching the filter "{{input.value}}"</td>
    </tr>
    
   
  </table>
</cdk-virtual-scroll-viewport>


  <!-- <mat-paginator [pageSizeOptions]="[5, 10, 25, 100,10]" aria-label="Select page of users"></mat-paginator>  -->

</div>

</mat-card-content>
<mat-card-footer class="example-card-footer">
  </mat-card-footer>
</mat-card>

</div>




 <div  *ngIf="verconversacion" style=" width:74%;
float:right;
vertical-align:bottom;
  text-align:bottom;
margin-right: 2px;
height: 550px;"

>





<mat-card class=" conversacion" appearance="outlined">

       
    <div style="width: 50%;
    float: left;
    vertical-align: bottom;
    text-align: bottom;
    margin-right: auto;
    /* height: 550px; */
    border: double;
    /* border-radius: 2px; */
    height: 415px;
    margin-top: 31px;">
    <div  (click)="openDialog()" style="    margin: 10px;
    border: groove; border-radius: 20px;  background-color: #82c7e6; " >
    <span><i class="material-icons">precision_manufacturing</i>Gestionar Solicitudes</span>
     
    </div>
    <div  (click)="traer_archivo('Solicitudes')" style="    margin: 10px;
    border: groove; border-radius: 20px;  background-color: #82c7e6; " >
    <i class="material-icons">view_list</i>
    <span>Imprimir Solicitudes</span>
    
    </div>
    <div  (click)="traer_archivo('Conversacion')" style="    margin: 10px;
    border: groove; border-radius: 20px;  background-color: #82c7e6; " >
    <i class="material-icons">chat</i>
    <span> Imprimir Conversaci√≤n</span>
    
    </div>


  </div>
  




  <mat-card-header>
    <mat-card-title> Contacto: {{contacto}}</mat-card-title>
  </mat-card-header>
 
  <mat-card-content class="mat-card-content1">
  <mat-selection-list #Conver [(ngModel)]="Conversa"  >
    <!-- <button (click)="container.scrollTop = 2000">Scroll to Top</button> -->
    <!-- <button (click)="scrollToBottom()">Scroll to Top</button> -->
    <div #container class="container" >
       
      <ul>
    
        <li *ngFor="let Conver of Conversa" class="divconversa">
        
          <div *ngIf="Conver.dedonde=='BOT'" style="border-radius: 10px 10px 30px 0px; margin: 10px;
          border: groove;  background-color:#0f6446 ;width: fit-content; margin-left: 100px;" >
            {{Conver.Mensaje}}
        </div>  
      
        
        <div  *ngIf="Conver.dedonde=='WEB'" style=" margin: 10px;
        border: groove; border-radius: 20px 10px; background-color:#777c7a ;width: fit-content; ">
          {{Conver.Mensaje}}  
        </div> 

        <div  *ngIf="Conver.dedonde=='ASO'  &&  Conver.Ruta_Archivo == 'N'" style=" margin: 10px;
        border: groove; border-radius: 20px 10px; background-color:#7c9c48 ;width: fit-content; ">
          {{Conver.Mensaje}}  
        </div> 
        <div  *ngIf="Conver.dedonde=='ASO'  &&  Conver.Ruta_Archivo == 'S'">
          <img   style="height:200px"  [src]="Conver.Mensaje" alt=""  (click)="downloadFile(Conver.Mensaje)"  >
          <!-- <a href="{{ Conver.Mensaje }}"  download> 
            Download Image
        </a> -->
   </div>
        
        </li>
    
      </ul>
      
    </div>
         
      
     
    </mat-selection-list>
       
    
  </mat-card-content>
  
  <mat-card-footer class="example-card-footer" >
    <div class="example-button-row"  >
      
      <div class='searchBox'  >
        <input  (keyup.enter)="enviar(numero)" class="input1" type='text' [(ngModel)]="texto" placeholder='Mensaje'/>
        <button class="btn success" (click)="enviar(numero)"  ><mat-icon style="    margin-left: -11px;">send</mat-icon>Enviar...</button>
        <input class="success"  type="file" (change)="selectFile($event)" />
    </div>
    </div>
  </mat-card-footer>
</mat-card>

</div> 
</div>