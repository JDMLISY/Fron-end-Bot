<!-- ✅ Solo un nav limpio, sin banda negra -->
<mat-toolbar color="primary" class="navbar-custom">

  <!-- 📋 Botón flotante de menú reubicado -->
  <div class="menu-btn-container" *ngIf="showAdminBoard || showSuperAdminBoard || showModeratorBoard">
    <button mat-mini-fab aria-label="Menú" [matMenuTriggerFor]="Menu">
      <mat-icon>list_alt</mat-icon>
    </button>
  </div>

  <!-- 🖼️ Logo + Título -->
  <div class="logo-container" *ngIf="isLoggedIn">
    <img *ngIf="logoEntidad"  [src]="logoEntidad"   alt="Logo Entidad" class="logo-img" />
    <span   class="titulo-navbar">{{NombreEntidad}}</span>
  </div>



  <span *ngIf="isLoggedIn" class="spacer">    <a href="#"  class="navbar-brand">📊 </a></span>

  <!-- 👤 Usuario y salir -->
  <div class="usuario-container" *ngIf="isLoggedIn">
    <mat-icon>account_circle</mat-icon>
    <span  class="usuario-nombre">{{ username }}</span>
    <button mat-mini-fab class="nav-link" (click)="logout()" style="margin-left: 8px;">
      <mat-icon style="color: black;">exit_to_app</mat-icon>
    </button>
  </div>

</mat-toolbar>

<!-- Menús desplegables -->
<mat-menu #Menu="matMenu">
  <button mat-menu-item [matMenuTriggerFor]="Configuraciones" *ngIf="showSuperAdminBoard || showAdminBoard">
    <mat-icon style="color: black;">settings</mat-icon>Configuraciones
  </button>
  <button mat-menu-item [matMenuTriggerFor]="Conversaciones">
    <mat-icon style="color: black;">business</mat-icon>Call center
  </button>
  <button mat-menu-item [matMenuTriggerFor]="Comercio">
    <mat-icon style="color: black;">store_mall_directory</mat-icon>Comercio
  </button>
  <button mat-menu-item [matMenuTriggerFor]="Eventos">
    <mat-icon style="color: black;">casino</mat-icon>Eventos
  </button>
</mat-menu>

<!-- Submenús -->
<mat-menu #Configuraciones="matMenu">
  <a *ngIf="showSuperAdminBoard" mat-button href="/matricula-entidades" routerLink="matricula-entidades">
    <mat-icon>account_balance</mat-icon>Registrar entidades
  </a>
  <a *ngIf="showSuperAdminBoard || showAdminBoard" mat-button href="/register" routerLink="register">
    <mat-icon>supervised_user_circle</mat-icon>Registrar usuarios
  </a>
  <a *ngIf="showSuperAdminBoard" mat-button href="/activaModulo" routerLink="activaModulo">
    <mat-icon style="color: black;">view_module</mat-icon>Activar Módulos
  </a>
</mat-menu>

<mat-menu #Conversaciones="matMenu">
  <button mat-menu-item (click)="services.ValidarModulo('/listAso','Call center')">🗂️ Solicitudes</button>
  <button mat-menu-item (click)="services.ValidarModulo('/Informes','Call center')">📊 Informes</button>
  <button mat-menu-item (click)="services.ValidarModulo('Radicados','Call center')">✅ Activar radicados</button>
  <button mat-menu-item (click)="services.ValidarModulo('ayudas','Call center')">📘 Matrícula de ayudas</button>
  <button mat-menu-item (click)="abrirFlujoConversacional()" *ngIf="showSuperAdminBoard || showAdminBoard">💬 Flujo Conversacional</button>
</mat-menu>

<mat-menu #Comercio="matMenu">
  <button mat-menu-item (click)="services.ValidarModulo('/Archivos','Comercio')">
    <mat-icon style="color: black;">library_add</mat-icon>Cargue de Archivos
  </button>
  <button mat-menu-item (click)="services.ValidarModulo('/Infocomercio','Comercio')">
    <mat-icon style="color: black;">bar_chart</mat-icon>Informes
  </button>
</mat-menu>

<mat-menu #Eventos="matMenu">
  <button mat-menu-item (click)="services.ValidarModulo('/lectorqr','Eventos')">
    <mat-icon style="color: black;">photo_camera</mat-icon>Validación de QR
  </button>
</mat-menu>

<!-- Contenido -->
<router-outlet></router-outlet>

