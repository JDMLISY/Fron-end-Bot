<mat-toolbar color="primary" class="cabecera">
    <mat-icon>business</mat-icon>
    <span>Matrícula de Entidades</span>
  
    <span class="spacer"></span>
    <button mat-raised-button color="accent" (click)="Limpiar()">
      <mat-icon>remove_from_queue</mat-icon>&nbsp;Limpiar
    </button>
  </mat-toolbar>
  
  <form class="formulario" [formGroup]="form" (ngSubmit)=" onSubmit()">
    <mat-card appearance="outlined">
      <mat-card-content class="form-grid">
        
        <!-- Nit de la entidad -->
        <mat-form-field appearance="fill">
          <mat-label>NIT</mat-label>
          <input matInput formControlName="Nitentidades" placeholder="123456789-0" />
          <mat-error *ngIf="form.get('Nitentidades')?.hasError('required')">NIT es <strong>Requerido</strong></mat-error>
        </mat-form-field>
  
        <!-- Nombre entidad -->
        <mat-form-field appearance="fill">
          <mat-label>Nombre Entidad</mat-label>
          <input matInput formControlName="NombreEntidad" placeholder="Cooperativa Ejemplo" />
          <mat-error *ngIf="form.get('NombreEntidad')?.hasError('required')">Nombre es <strong>Requerido</strong></mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Alias BD</mat-label>
          <input matInput formControlName="AliasBD" placeholder="Nombre bd Ejemplo" />
          <mat-error *ngIf="form.get('AliasBD')?.hasError('required')">Nombre es <strong>Requerido</strong></mat-error>
        </mat-form-field>
  
        <!-- Fecha matrícula -->
        <mat-form-field appearance="fill">
          <mat-label>Fecha Matrícula</mat-label>
          <input matInput type="date" formControlName="FechaMatricula" />
          <mat-error *ngIf="form.get('FechaMatricula')?.hasError('required')">Fecha es <strong>Requerida</strong></mat-error>
        </mat-form-field>
  
     
  
        <!-- Origen datos -->
 <!-- Origen de Datos -->
<mat-form-field appearance="fill">
    <mat-label>Origen de Datos</mat-label>
    <mat-select id="Origendatos" formControlName="Origendatos" required>
      <mat-option value="Sabana">Sabana</mat-option>
      <mat-option value="Soari">Soari</mat-option>
    </mat-select>
    <mat-error *ngIf="form.get('Origendatos')?.hasError('required')">
      Origen de datos es <strong>Requerido</strong>
    </mat-error>
  </mat-form-field>
  
  
   <!-- Nombre BD -->
   <mat-form-field appearance="fill" *ngIf="mostrarNombreBD">
    <mat-label>Nombre Base de Datos para conexión</mat-label>
    <mat-select formControlName="nombrebd" placeholder="Selecciona una base de datos">
      <mat-option *ngFor="let bd of bdentidades" [value]="bd.NombreCatalogo">
        {{ bd.NombreCatalogo }}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="form.get('nombrebd')?.hasError('required')">
      Campo requerido
    </mat-error>
  </mat-form-field>
  
<!-- CONTENEDOR FLEX PRINCIPAL -->
<div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">

  <!-- BLOQUE: LABEL + INPUT (EN COLUMNA) -->
  <div style="display: flex; flex-direction: column; flex: 1;">
    <label for="logoInput" style="font-weight: bold; margin-bottom: 4px;">Logo de la Entidad</label>
    <input id="logoInput"
    type="file"
    accept="image/*"
    (change)="onFileSelected($event)"
    (mouseenter)="hovered = true"
    (mouseleave)="hovered = false"
    [ngStyle]="{
      padding: '8px',
      border: '2px dashed',
      borderColor: hovered ? '#1976d2' : '#90caf9',
      backgroundColor: '#f5faff',
      borderRadius: '6px',
      cursor: 'pointer',
      color: '#333',
      fontSize: '14px',
      transition: 'border-color 0.3s'
    }"
/>

  </div>

  <!-- BLOQUE: IMAGEN -->
  <div *ngIf="form.get('LogoEntidad')?.value" style="flex-shrink: 0;">
    <img [src]="form.get('LogoEntidad')?.value"
         alt="Logo"
         style="max-height: 80px; max-width: 120px; border: 1px solid #ccc; border-radius: 6px; padding: 4px;" />
  </div>

</div>

  
  
      </mat-card-content>
    </mat-card>
  
    <mat-card class="botones-card" appearance="outlined">
      <mat-card-content class="botones-container">
        <button mat-raised-button color="primary" type="submit">
          <mat-icon>save_alt</mat-icon>&nbsp;Registrar
        </button>
        <button mat-raised-button color="warn" type="button" (click)="onNoClick()">
          <mat-icon>cancel</mat-icon>&nbsp;Cancelar
        </button>
      </mat-card-content>
    </mat-card>
  </form>
  
  <div class="alert alert-success" *ngIf="isSuccessful">
    ¡Entidad registrada exitosamente!
  </div>
  